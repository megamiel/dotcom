<div class="sentence" id="kaisetsu">まずIPパケットとイーサネットフレームの違いについて確認しておきます。<dl><dt>IPパケット</dt><dd>IPアドレスによってネットワーク層の通信を行うIPヘッダを付加したパケット</dd><dt>イーサネットフレーム(MACフレーム)</dt><dd>MACアドレスによってデータリンク層の通信を行うために、IPパケットにMACヘッダを付加したパケット</dd></dl>ホストBは、ホストAから見てルータの外側(異なるブロードキャストドメイン)に属するので、直接通信ができません。そこでホストAは、ルータを経由してホストBにパケットを届けることになります。<br/><br/>IPアドレスは通信する端末間でエンドトゥエンドなので、ホストAが送信するIPデータグラムの宛先IPアドレスにはホストBの <b>IP2</b> を指定します。ルータとホストAは、同じブロードキャストドメインに属するので、ホストAはARPでルータのMACアドレスを取得して、<b>MAC3</b> を宛先MACアドレスに指定します。<br/>IPパケットを受け取ったルータは、宛先IPアドレスを見てホストBが自身に直接接続されているネットワークに属していると判断します。ルータは、ARPによってホストBのMACアドレスを取得し、宛先MACアドレスをMAC2に書き換えて、LAN2側のポートからイーサネットフレームを送出します。<div class="img_margin"><img alt="33_1.gif" src="https://www.ap-siken.com/kakomon/31_haru/img/33_1.gif"/></div>したがって、LAN1内におけるパケットの宛先はIPアドレス「IP2」、MACアドレス「MAC3」に設定されています。</div>