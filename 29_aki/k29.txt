<div class="sentence" id="kaisetsu"><strong>待ちグラフ</strong>は、実行中のトランザクションを各ノード、データのアンロック待ちの様子を矢印(有向辺)で表現したグラフで、デッドロックの検出に使用されます。<br/><br/>まずA～Gのトランザクションのうち、資源のアンロック待ちにより処理が停止しているトランザクションに印を付けると次のようになります。<div class="img_margin"><img alt="29_1.gif" src="https://www.ap-siken.com/kakomon/29_aki/img/29_1.gif"/></div>この時点で処理が進行しているのはAとGのみです。この後、トランザクションの進行に伴いAの資源がアンロックされますが、Bの資源アンロックを待っているCは再開できません。一方、Gの資源がアンロックされるとEは処理を再開できます。<div class="img_margin"><img alt="29_2.gif" src="https://www.ap-siken.com/kakomon/29_aki/img/29_2.gif"/></div>そしてEが資源をアンロックするとDまたはFがその資源を得ます。しかしDはCの、FはDの資源アンロックを待っているため、どちらのトランザクションも再開できません。ここでデッドロックとなります。<div class="img_margin"><img alt="29_3.gif" src="https://www.ap-siken.com/kakomon/29_aki/img/29_3.gif"/></div>したがって永久待ちの状態になっているトランザクションの組は「B，C，D，F」です。</div>