<div class="sentence" id="kaisetsu">演算子 <b>IN</b>，<b>EXISTS</b>，<b>ALL</b> 及び <b>ANY</b> は、値の集合や副問合せ(サブクエリ)からの結果セットに対して「真(True)」又は「偽(False)」の評価を行い、主問合せ(メインクエリ)のWHERE句で使用されます。<br/><br/>それぞれの演算子は以下のような評価を行い真偽を返します。<dl><dt>IN</dt><dd>結果セットの値のうち<b>いずれか</b>に一致すれば真を返し、そうでなければ偽を返す。</dd><dt>EXISTS</dt><dd>副問合せの結果セットが1行以上あれば真を返し、そうでなければ偽を返す。</dd><dt>ANY</dt><dd>比較演算子(＝,≧,≦,&lt;&gt;)と共に使用され、副問合せの結果セットの値のうち、いずれかが条件を満たせば真を返し、そうでなければ偽を返す。</dd><dt>ALL</dt><dd>比較演算子と共に使用され、副問合せの結果セットの値の<b>全て</b>が条件を満たした場合にだけ真を返し、そうでなければ偽を返す。</dd></dl>設問のSQL内の副問合せは、ほぼ同じで表から倉庫番号が'C003'、かつ在庫数が100個以上のレコードの商品コードを抽出するものです。この副問合せの結果は商品コードの値の集合となります。<ul class="selectList"><li class="lia">副問合せの結果が複数行になるので、単一の値と比較することを前提とした比較演算子の"＝"だとエラーになります。</li><li class="lii">1つの商品コードが結果セットの商品コードの集合の全て(ALL)と一致することはないため、主問合せのWHERE句の条件にマッチする行は存在しません。</li><li class="liu">正しい。主問合せの各行の商品コードに対して、副問合せの結果セットに含まれるかを判定することで集計対象となる行のみに絞り込みができます。</li><li class="lie">副問合せは1行以上の結果セットを返しEXISTSは常に真と判定されるため、条件による絞り込みが機能しません。</li></ul></div>